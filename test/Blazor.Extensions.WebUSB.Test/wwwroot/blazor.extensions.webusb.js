!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);var i;!function(e){const t="BlazorExtensions",n={WebUSB:new r.USBManager};e.initialize=function(){"undefined"==typeof window||window[t]?window[t]=Object.assign(Object.assign({},window[t]),n):window[t]=Object.assign({},n)}}(i||(i={})),i.initialize()},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);t.USBManager=class{constructor(){this.usb=navigator.usb,this._usbReference=void 0,this._foundDevices=[],this._eventsRegistered=!1,this.GetDevices=(()=>r(this,void 0,void 0,function*(){let e=yield this.usb.getDevices(),t=[];return e&&e.forEach(e=>{t.push(i.ParseUSBDevice(e)),this._foundDevices.push(e)}),t})),this.RequestDevice=(e=>r(this,void 0,void 0,function*(){let t=[],n=void 0;e&&null!=e&&e.filters&&null!=e.filters&&e.filters.length>0?(e.filters.forEach(e=>{let n={};Object.keys(e).forEach(t=>{null!=e[t]&&(n[t]=e[t])}),function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(n)||t.push(n)}),t.length>0&&(n={filters:t})):n={filters:[]};let r=yield this.usb.requestDevice(n),o=i.ParseUSBDevice(r);return this._foundDevices.push(r),o})),this.OpenDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.open().then(()=>{let n=i.ParseUSBDevice(t);console.log(n),e(n)}).catch(e=>n(e))})}),this.CloseDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.close().then(()=>{e(i.ParseUSBDevice(t))}).catch(e=>n(e))})}),this.ResetDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.reset().then(()=>{e(i.ParseUSBDevice(t))}).catch(e=>n(e))})}),this.SelectConfiguration=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");console.log(t),n.selectConfiguration(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.ClaimInterface=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");n.claimInterface(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.ReleaseInterface=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");n.releaseInterface(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.SelectAlternateInterface=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,o)=>{if(!r)return o("Device not connected");r.selectAlternateInterface(t,n).then(()=>{e(i.ParseUSBDevice(r))}).catch(e=>o(e))})}),this.ClearHalt=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,o)=>{if(!r)return o("Device not connected");r.clearHalt(t,n).then(()=>{e(i.ParseUSBDevice(r))}).catch(e=>o(e))})}),this.TransferIn=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");r.transferIn(t,n).then(t=>{e({data:this.BufferToBase64(Array.prototype.slice.call(new Uint8Array(t.data.buffer))),status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.TransferOut=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");const o=this.Base64ToBuffer(n);r.transferOut(t,o).then(t=>{e({bytesWritten:t.bytesWritten,status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.ControlTransferIn=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");r.ControlTransferIn(t,n).then(t=>{e({data:this.BufferToBase64(Array.prototype.slice.call(new Uint8Array(t.data.buffer))),status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.ControlTransferOut=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");const o=this.Base64ToBuffer(n);r.controlTransferOut(t,o).then(t=>{console.log(t),e({bytesWritten:t.bytesWritten,status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.GetUSBDevice=(e=>this._foundDevices.find(t=>t.vendorId==e.vendorId&&t.productId==e.productId&&t.deviceClass==e.deviceClass&&t.serialNumber==e.serialNumber)),this.ConnectionStateChangedCallback=(e=>{if(!this._usbReference)return;let t="",n=this.GetUSBDevice(e.device);if("disconnect"==e.type)t="OnDisconnect",this._foundDevices=this._foundDevices.filter((e,t,r)=>e.vendorId!=n.vendorId&&e.productId!=n.productId&&e.deviceClass!=n.deviceClass&&e.serialNumber!=n.serialNumber);else{if("connect"!=e.type)return void console.warn(e);t="OnConnect"}this._usbReference.invokeMethodAsync(t,i.ParseUSBDevice(e.device))}),this.RegisterUSBEvents=(e=>{this._usbReference=e,this._eventsRegistered||(this.usb.addEventListener("connect",this.ConnectionStateChangedCallback),this.usb.addEventListener("disconnect",this.ConnectionStateChangedCallback),this._eventsRegistered=!0)}),this.RemoveUSBEvents=(e=>{this._eventsRegistered&&(this.usb.removeEventListener("connect",this.ConnectionStateChangedCallback),this.usb.removeEventListener("disconnect",this.ConnectionStateChangedCallback))}),this.BufferToBase64=(e=>{var t=Array.prototype.map.call(e,e=>String.fromCharCode(e)).join("");return btoa(t)}),this.Base64ToBuffer=(e=>{var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(t,(e,t)=>{n[t]=e.charCodeAt(0)}),n})}}},function(e,t,n){"use strict";function r(e){return{configurationValue:e.configurationValue,configurationName:e.configurationName,interfaces:e.interfaces.map(e=>(function(e){return{interfaceNumber:e.interfaceNumber,alternate:e.alternate?i(e.alternate):null,alternates:e.alternates.map(e=>i(e)),claimed:e.claimed}})(e))}}function i(e){return{alternateSetting:e.alternateSetting,interfaceClass:e.interfaceClass,interfaceSubclass:e.interfaceSubclass,interfaceProtocol:e.interfaceProtocol,interfaceName:e.interfaceName,endpoints:e.endpoints.map(e=>(function(e){return{endpointNumber:e.endpointNumber,direction:e.direction,type:e.type,packetSize:e.packetSize}})(e))}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.in=0]="in",e[e.out=1]="out"}(t.USBDirection||(t.USBDirection={})),function(e){e[e.bulk=0]="bulk",e[e.interrupt=1]="interrupt",e[e.isochronous=2]="isochronous"}(t.USBEndpointType||(t.USBEndpointType={})),function(e){e[e.ok=0]="ok",e[e.stall=1]="stall",e[e.babble=2]="babble"}(t.USBTransferStatus||(t.USBTransferStatus={})),function(e){e[e.standard=0]="standard",e[e.class=1]="class",e[e.vendor=2]="vendor"}(t.USBRequestType||(t.USBRequestType={})),function(e){e[e.device=0]="device",e[e.interface=1]="interface",e[e.endpoint=2]="endpoint",e[e.other=3]="other"}(t.USBRecipient||(t.USBRecipient={})),t.ParseUSBDevice=function(e){return{usbVersionMajor:e.usbVersionMajor,usbVersionMinor:e.usbVersionMinor,usbVersionSubminor:e.usbVersionSubminor,deviceClass:e.deviceClass,deviceSubclass:e.deviceSubclass,deviceProtocol:e.deviceProtocol,vendorId:e.vendorId,productId:e.productId,deviceVersionMajor:e.deviceVersionMajor,deviceVersionMinor:e.deviceVersionMinor,deviceVersionSubminor:e.deviceVersionSubminor,manufacturerName:e.manufacturerName,productName:e.productName,serialNumber:e.serialNumber,configuration:null!=e.configuration?r(e.configuration):null,configurations:e.configurations.map(e=>r(e)),opened:e.opened}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luaXRpYWxpemVXZWJVU0IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1VTQk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1VTQlR5cGVzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVVNCTWFuYWdlcl8xIiwiV2ViVVNCIiwiYmxhem9yRXh0ZW5zaW9ucyIsImV4dGVuc2lvbk9iamVjdCIsIlVTQk1hbmFnZXIiLCJpbml0aWFsaXplIiwid2luZG93IiwiYXNzaWduIiwiVVNCVHlwZXNfMSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJ1c2IiLCJuYXZpZ2F0b3IiLCJfdXNiUmVmZXJlbmNlIiwidW5kZWZpbmVkIiwiX2ZvdW5kRGV2aWNlcyIsIl9ldmVudHNSZWdpc3RlcmVkIiwiR2V0RGV2aWNlcyIsIl9fYXdhaXRlciIsImRldmljZXMiLCJnZXREZXZpY2VzIiwiZm91bmQiLCJmb3JFYWNoIiwicHVzaCIsIlBhcnNlVVNCRGV2aWNlIiwiUmVxdWVzdERldmljZSIsIm9wdGlvbnMiLCJmaWx0ZXJzIiwicmVxT3B0aW9ucyIsImxlbmd0aCIsImYiLCJmaWx0ZXIiLCJrZXlzIiwib2JqIiwicHJvcCIsImlzRW1wdHkiLCJhdXRob3JpemVkRGV2aWNlIiwicmVxdWVzdERldmljZSIsInVzYkRldmljZSIsIk9wZW5EZXZpY2UiLCJkZXZpY2UiLCJHZXRVU0JEZXZpY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9wZW4iLCJ0aGVuIiwicGFyc2VkIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwiQ2xvc2VEZXZpY2UiLCJjbG9zZSIsIlJlc2V0RGV2aWNlIiwicmVzZXQiLCJTZWxlY3RDb25maWd1cmF0aW9uIiwiY29uZmlndXJhdGlvblZhbHVlIiwic2VsZWN0Q29uZmlndXJhdGlvbiIsIkNsYWltSW50ZXJmYWNlIiwiaW50ZXJmYWNlTnVtYmVyIiwiY2xhaW1JbnRlcmZhY2UiLCJSZWxlYXNlSW50ZXJmYWNlIiwicmVsZWFzZUludGVyZmFjZSIsIlNlbGVjdEFsdGVybmF0ZUludGVyZmFjZSIsImFsdGVybmF0ZVNldHRpbmciLCJzZWxlY3RBbHRlcm5hdGVJbnRlcmZhY2UiLCJDbGVhckhhbHQiLCJkaXJlY3Rpb24iLCJlbmRwb2ludE51bWJlciIsImNsZWFySGFsdCIsIlRyYW5zZmVySW4iLCJ0cmFuc2ZlckluIiwib3V0IiwiZGF0YSIsIkJ1ZmZlclRvQmFzZTY0IiwiQXJyYXkiLCJzbGljZSIsIlVpbnQ4QXJyYXkiLCJidWZmZXIiLCJzdGF0dXMiLCJlcnJvciIsIlRyYW5zZmVyT3V0IiwiQmFzZTY0VG9CdWZmZXIiLCJ0cmFuc2Zlck91dCIsImJ5dGVzV3JpdHRlbiIsIkNvbnRyb2xUcmFuc2ZlckluIiwic2V0dXAiLCJDb250cm9sVHJhbnNmZXJPdXQiLCJjb250cm9sVHJhbnNmZXJPdXQiLCJmaW5kIiwidmVuZG9ySWQiLCJwcm9kdWN0SWQiLCJkZXZpY2VDbGFzcyIsInNlcmlhbE51bWJlciIsIkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRDYWxsYmFjayIsImV2ZW50IiwibWV0aG9kIiwidHlwZSIsImluZGV4IiwiYXJyIiwid2FybiIsImludm9rZU1ldGhvZEFzeW5jIiwiUmVnaXN0ZXJVU0JFdmVudHMiLCJhZGRFdmVudExpc3RlbmVyIiwiUmVtb3ZlVVNCRXZlbnRzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJ1ZiIsImJpbnN0ciIsIm1hcCIsImNoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiam9pbiIsImJ0b2EiLCJiYXNlNjQiLCJhdG9iIiwiY2hhckNvZGVBdCIsIlBhcnNlVVNCQ29uZmlndXJhdGlvbiIsInJhd0NvbmZpZ3VyYXRpb24iLCJjb25maWd1cmF0aW9uTmFtZSIsImludGVyZmFjZXMiLCJyYXciLCJyYXdJbnRlcmZhY2UiLCJhbHRlcm5hdGUiLCJQYXJzZVVTQkFsdGVybmF0ZUludGVyZmFjZSIsImFsdGVybmF0ZXMiLCJjbGFpbWVkIiwiUGFyc2VVU0JJbnRlcmZhY2UiLCJyYXdBbHRlcm5hdGUiLCJpbnRlcmZhY2VDbGFzcyIsImludGVyZmFjZVN1YmNsYXNzIiwiaW50ZXJmYWNlUHJvdG9jb2wiLCJpbnRlcmZhY2VOYW1lIiwiZW5kcG9pbnRzIiwicmF3RW5kcG9pbnQiLCJwYWNrZXRTaXplIiwiUGFyc2VVU0JFbmRwb2ludCIsIlVTQkRpcmVjdGlvbiIsIlVTQkVuZHBvaW50VHlwZSIsIlVTQlRyYW5zZmVyU3RhdHVzIiwiVVNCUmVxdWVzdFR5cGUiLCJVU0JSZWNpcGllbnQiLCJyYXdEZXZpY2UiLCJ1c2JWZXJzaW9uTWFqb3IiLCJ1c2JWZXJzaW9uTWlub3IiLCJ1c2JWZXJzaW9uU3VibWlub3IiLCJkZXZpY2VTdWJjbGFzcyIsImRldmljZVByb3RvY29sIiwiZGV2aWNlVmVyc2lvbk1ham9yIiwiZGV2aWNlVmVyc2lvbk1pbm9yIiwiZGV2aWNlVmVyc2lvblN1Ym1pbm9yIiwibWFudWZhY3R1cmVyTmFtZSIsInByb2R1Y3ROYW1lIiwiY29uZmlndXJhdGlvbiIsImNvbmZpZ3VyYXRpb25zIiwib3BlbmVkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLG1GQ2xGQSxNQUFBQyxFQUFBcEMsRUFBQSxHQUVBLElBQVVxQyxHQUFWLFNBQVVBLEdBQ04sTUFBTUMsRUFBMkIsbUJBRTNCQyxHQUNGRixPQUFRLElBQUlELEVBQUFJLFlBR0FILEVBQUFJLFdBQWhCLFdBQzBCLG9CQUFYQyxRQUEyQkEsT0FBT0osR0FPekNJLE9BQU9KLEdBQWlCeEIsT0FBQTZCLE9BQUE3QixPQUFBNkIsVUFDakJELE9BQU9KLElBQ1BDLEdBTlBHLE9BQU9KLEdBQWlCeEIsT0FBQTZCLFVBQ2pCSixJQVpuQixDQUFVRixXQXVCVkEsRUFBT0ksbWFDekJQLE1BQUFHLEVBQUE1QyxFQUFBLEdBT0FFLEVBQUFzQyxpQkFBQUssY0FDVUMsS0FBQUMsSUFBaUJDLFVBQVdELElBQzVCRCxLQUFBRyxtQkFBaURDLEVBSWpESixLQUFBSyxpQkFDQUwsS0FBQU0sbUJBQTZCLEVBRTlCTixLQUFBTyxXQUFhLEtBQXNDQyxFQUFBUixVQUFBLHFCQUN4RCxJQUFJUyxRQUFnQlQsS0FBS0MsSUFBSVMsYUFDekJDLEtBT0osT0FOSUYsR0FDRkEsRUFBUUcsUUFBUWhELElBQ2QrQyxFQUFNRSxLQUFLZixFQUFBZ0IsZUFBZWxELElBQzFCb0MsS0FBS0ssY0FBY1EsS0FBS2pELEtBR3JCK0MsS0FHRlgsS0FBQWUsY0FBZ0IsQ0FBT0MsR0FBNkRSLEVBQUFSLFVBQUEscUJBVXpGLElBQUlpQixLQUNBQyxPQUFrQmQsRUFFbEJZLEdBQXNCLE1BQVhBLEdBQW1CQSxFQUFRQyxTQUE4QixNQUFuQkQsRUFBUUMsU0FBbUJELEVBQVFDLFFBQVFFLE9BQVMsR0FDdkdILEVBQVFDLFFBQVFMLFFBQVFRLElBQ3RCLElBQUlDLEtBQ0pyRCxPQUFPc0QsS0FBS0YsR0FBR1IsUUFBUS9CLElBQ1AsTUFBVnVDLEVBQUV2QyxLQUNKd0MsRUFBT3hDLEdBQU91QyxFQUFFdkMsTUFqQnhCLFNBQWlCMEMsR0FDZixJQUFLLElBQUlDLEtBQVFELEVBQ2YsR0FBSXZELE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBSzhELEVBQUtDLEdBQzVDLE9BQU8sRUFHWCxPQUFPLEVBY0FDLENBQVFKLElBQ1hKLEVBQVFKLEtBQUtRLEtBSWJKLEVBQVFFLE9BQVMsSUFDbkJELEdBQWVELFFBQVNBLEtBRzFCQyxHQUFlRCxZQUdqQixJQUFJUyxRQUF5QjFCLEtBQUtDLElBQUkwQixjQUFjVCxHQUNoRFUsRUFBWTlCLEVBQUFnQixlQUFlWSxHQUUvQixPQURBMUIsS0FBS0ssY0FBY1EsS0FBS2EsR0FDakJFLEtBR0Y1QixLQUFBNkIsV0FBYSxDQUFDQyxJQUNuQixJQUFJRixFQUFZNUIsS0FBSytCLGFBQWFELEdBQ2xDLE9BQU8sSUFBSUUsUUFBd0IsQ0FBQ0MsRUFBU0MsS0FDM0MsSUFBS04sRUFBVyxPQUFPTSxFQUFPLHdCQUM5Qk4sRUFBVU8sT0FDUEMsS0FBSyxLQUNKLElBQUlDLEVBQVN2QyxFQUFBZ0IsZUFBZWMsR0FDNUJVLFFBQVFDLElBQUlGLEdBQ1pKLEVBQVFJLEtBRVRHLE1BQU1DLEdBQU9QLEVBQU9PLFFBSXBCekMsS0FBQTBDLFlBQWMsQ0FBQ1osSUFDcEIsSUFBSUYsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQXdCLENBQUNDLEVBQVNDLEtBQzNDLElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFDOUJOLEVBQVVlLFFBQ1BQLEtBQUssS0FDSkgsRUFBUW5DLEVBQUFnQixlQUFlYyxNQUV4QlksTUFBTUMsR0FBT1AsRUFBT08sUUFJcEJ6QyxLQUFBNEMsWUFBYyxDQUFDZCxJQUNwQixJQUFJRixFQUFZNUIsS0FBSytCLGFBQWFELEdBQ2xDLE9BQU8sSUFBSUUsUUFBd0IsQ0FBQ0MsRUFBU0MsS0FDM0MsSUFBS04sRUFBVyxPQUFPTSxFQUFPLHdCQUM5Qk4sRUFBVWlCLFFBQ1BULEtBQUssS0FDSkgsRUFBUW5DLEVBQUFnQixlQUFlYyxNQUV4QlksTUFBTUMsR0FBT1AsRUFBT08sUUFJcEJ6QyxLQUFBOEMsb0JBQXNCLEVBQUNoQixFQUF3QmlCLEtBQ3BELElBQUluQixFQUFZNUIsS0FBSytCLGFBQWFELEdBQ2xDLE9BQU8sSUFBSUUsUUFBd0IsQ0FBQ0MsRUFBU0MsS0FDM0MsSUFBS04sRUFBVyxPQUFPTSxFQUFPLHdCQUM5QkksUUFBUUMsSUFBSVEsR0FDWm5CLEVBQVVvQixvQkFBb0JELEdBQzNCWCxLQUFLLEtBQ0pILEVBQVFuQyxFQUFBZ0IsZUFBZWMsTUFFeEJZLE1BQU1DLEdBQU9QLEVBQU9PLFFBSXBCekMsS0FBQWlELGVBQWlCLEVBQUNuQixFQUF3Qm9CLEtBQy9DLElBQUl0QixFQUFZNUIsS0FBSytCLGFBQWFELEdBQ2xDLE9BQU8sSUFBSUUsUUFBd0IsQ0FBQ0MsRUFBU0MsS0FDM0MsSUFBS04sRUFBVyxPQUFPTSxFQUFPLHdCQUU5Qk4sRUFBVXVCLGVBQWVELEdBQ3RCZCxLQUFLLEtBQ0pILEVBQVFuQyxFQUFBZ0IsZUFBZWMsTUFFeEJZLE1BQU1DLEdBQU9QLEVBQU9PLFFBSXBCekMsS0FBQW9ELGlCQUFtQixFQUFDdEIsRUFBd0JvQixLQUNqRCxJQUFJdEIsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQXdCLENBQUNDLEVBQVNDLEtBQzNDLElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFFOUJOLEVBQVV5QixpQkFBaUJILEdBQ3hCZCxLQUFLLEtBQ0pILEVBQVFuQyxFQUFBZ0IsZUFBZWMsTUFFeEJZLE1BQU1DLEdBQU9QLEVBQU9PLFFBSXBCekMsS0FBQXNELHlCQUEyQixFQUFDeEIsRUFBd0JvQixFQUF5QkssS0FDbEYsSUFBSTNCLEVBQVk1QixLQUFLK0IsYUFBYUQsR0FDbEMsT0FBTyxJQUFJRSxRQUF3QixDQUFDQyxFQUFTQyxLQUMzQyxJQUFLTixFQUFXLE9BQU9NLEVBQU8sd0JBRTlCTixFQUFVNEIseUJBQXlCTixFQUFpQkssR0FDakRuQixLQUFLLEtBQ0pILEVBQVFuQyxFQUFBZ0IsZUFBZWMsTUFFeEJZLE1BQU1DLEdBQU9QLEVBQU9PLFFBSXBCekMsS0FBQXlELFVBQVksRUFBQzNCLEVBQXdCNEIsRUFBeUJDLEtBQ25FLElBQUkvQixFQUFZNUIsS0FBSytCLGFBQWFELEdBQ2xDLE9BQU8sSUFBSUUsUUFBd0IsQ0FBQ0MsRUFBU0MsS0FDM0MsSUFBS04sRUFBVyxPQUFPTSxFQUFPLHdCQUU5Qk4sRUFBVWdDLFVBQVVGLEVBQVdDLEdBQzVCdkIsS0FBSyxLQUNKSCxFQUFRbkMsRUFBQWdCLGVBQWVjLE1BRXhCWSxNQUFNQyxHQUFPUCxFQUFPTyxRQUlwQnpDLEtBQUE2RCxXQUFhLEVBQUMvQixFQUF3QjZCLEVBQXdCeEMsS0FDbkUsSUFBSVMsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQTZCLENBQUNDLEVBQVNDLEtBQ2hELElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFFOUJOLEVBQVVrQyxXQUFXSCxFQUFnQnhDLEdBQ2xDaUIsS0FBSzJCLElBQ0o5QixHQUNFK0IsS0FBTWhFLEtBQUtpRSxlQUFlQyxNQUFNaEYsVUFBVWlGLE1BQU0xRyxLQUFLLElBQUkyRyxXQUFXTCxFQUFJQyxLQUFLSyxVQUM3RUMsT0FBUVAsRUFBSU8sV0FHZjlCLE1BQU1DLElBQ0xILFFBQVFpQyxNQUFNOUIsR0FDZFAsRUFBT08sU0FLUnpDLEtBQUF3RSxZQUFjLEVBQUMxQyxFQUF3QjZCLEVBQXdCSyxLQUNwRSxJQUFJcEMsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQThCLENBQUNDLEVBQVNDLEtBQ2pELElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFDOUIsTUFBTW1DLEVBQVNyRSxLQUFLeUUsZUFBZVQsR0FFbkNwQyxFQUFVOEMsWUFBWWYsRUFBZ0JVLEdBQ25DakMsS0FBSzJCLElBQ0o5QixHQUNFMEMsYUFBY1osRUFBSVksYUFDbEJMLE9BQVFQLEVBQUlPLFdBR2Y5QixNQUFNQyxJQUNMSCxRQUFRaUMsTUFBTTlCLEdBQ2RQLEVBQU9PLFNBS1J6QyxLQUFBNEUsa0JBQW9CLEVBQUM5QyxFQUF3QitDLEVBQXFDMUQsS0FDdkYsSUFBSVMsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQTZCLENBQUNDLEVBQVNDLEtBQ2hELElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFFOUJOLEVBQVVnRCxrQkFBa0JDLEVBQU8xRCxHQUNoQ2lCLEtBQUsyQixJQUNKOUIsR0FDRStCLEtBQU1oRSxLQUFLaUUsZUFBZUMsTUFBTWhGLFVBQVVpRixNQUFNMUcsS0FBSyxJQUFJMkcsV0FBV0wsRUFBSUMsS0FBS0ssVUFDN0VDLE9BQVFQLEVBQUlPLFdBR2Y5QixNQUFNQyxJQUNMSCxRQUFRaUMsTUFBTTlCLEdBQ2RQLEVBQU9PLFNBS1J6QyxLQUFBOEUsbUJBQXFCLEVBQUNoRCxFQUF3QitDLEVBQXFDYixLQUN4RixJQUFJcEMsRUFBWTVCLEtBQUsrQixhQUFhRCxHQUNsQyxPQUFPLElBQUlFLFFBQThCLENBQUNDLEVBQVNDLEtBQ2pELElBQUtOLEVBQVcsT0FBT00sRUFBTyx3QkFDOUIsTUFBTW1DLEVBQVNyRSxLQUFLeUUsZUFBZVQsR0FFbkNwQyxFQUFVbUQsbUJBQW1CRixFQUFPUixHQUNqQ2pDLEtBQUsyQixJQUNKekIsUUFBUUMsSUFBSXdCLEdBQ1o5QixHQUNFMEMsYUFBY1osRUFBSVksYUFDbEJMLE9BQVFQLEVBQUlPLFdBR2Y5QixNQUFNQyxJQUNMSCxRQUFRaUMsTUFBTTlCLEdBQ2RQLEVBQU9PLFNBS1B6QyxLQUFBK0IsYUFBZSxDQUFDRCxHQUNmOUIsS0FBS0ssY0FBYzJFLEtBQ3hCcEgsR0FBS0EsRUFBRXFILFVBQVluRCxFQUFPbUQsVUFDeEJySCxFQUFFc0gsV0FBYXBELEVBQU9vRCxXQUN0QnRILEVBQUV1SCxhQUFlckQsRUFBT3FELGFBQ3hCdkgsRUFBRXdILGNBQWdCdEQsRUFBT3NELGVBR3ZCcEYsS0FBQXFGLCtCQUFpQyxDQUFDQyxJQUN4QyxJQUFLdEYsS0FBS0csY0FBZSxPQUN6QixJQUFJb0YsRUFBaUIsR0FFakIzRCxFQUFZNUIsS0FBSytCLGFBQWF1RCxFQUFNeEQsUUFFeEMsR0FBa0IsY0FBZHdELEVBQU1FLEtBQ1JELEVBQVMsZUFDVHZGLEtBQUtLLGNBQWdCTCxLQUFLSyxjQUFjZ0IsT0FBTyxDQUFDekQsRUFBRzZILEVBQU9DLElBQ2pEOUgsRUFBRXFILFVBQVlyRCxFQUFVcUQsVUFDN0JySCxFQUFFc0gsV0FBYXRELEVBQVVzRCxXQUN6QnRILEVBQUV1SCxhQUFldkQsRUFBVXVELGFBQzNCdkgsRUFBRXdILGNBQWdCeEQsRUFBVXdELGtCQUc3QixJQUFrQixXQUFkRSxFQUFNRSxLQUtiLFlBREFsRCxRQUFRcUQsS0FBS0wsR0FIYkMsRUFBUyxZQU9YdkYsS0FBS0csY0FBY3lGLGtCQUFrQkwsRUFBUXpGLEVBQUFnQixlQUFld0UsRUFBTXhELFdBRzdEOUIsS0FBQTZGLGtCQUFvQixDQUFDNUYsSUFDMUJELEtBQUtHLGNBQWdCRixFQUVoQkQsS0FBS00sb0JBQ1JOLEtBQUtDLElBQUk2RixpQkFBaUIsVUFBVzlGLEtBQUtxRixnQ0FDMUNyRixLQUFLQyxJQUFJNkYsaUJBQWlCLGFBQWM5RixLQUFLcUYsZ0NBQzdDckYsS0FBS00sbUJBQW9CLEtBSXRCTixLQUFBK0YsZ0JBQWtCLENBQUM5RixJQUNwQkQsS0FBS00sb0JBQ1BOLEtBQUtDLElBQUkrRixvQkFBb0IsVUFBV2hHLEtBQUtxRixnQ0FDN0NyRixLQUFLQyxJQUFJK0Ysb0JBQW9CLGFBQWNoRyxLQUFLcUYsbUNBSTVDckYsS0FBQWlFLGVBQWlCLENBQUNnQyxJQUN4QixJQUFJQyxFQUFTaEMsTUFBTWhGLFVBQVVpSCxJQUFJMUksS0FBS3dJLEVBQU1HLEdBQ25DQyxPQUFPQyxhQUFhRixJQUMxQkcsS0FBSyxJQUNSLE9BQU9DLEtBQUtOLEtBR05sRyxLQUFBeUUsZUFBaUIsQ0FBQ2dDLElBQ3hCLElBQUlQLEVBQVNRLEtBQUtELEdBQ2RSLEVBQU0sSUFBSTdCLFdBQVc4QixFQUFPL0UsUUFJaEMsT0FIQStDLE1BQU1oRixVQUFVMEIsUUFBUW5ELEtBQUt5SSxFQUFRLENBQUNFLEVBQUk5SSxLQUN4QzJJLEVBQUkzSSxHQUFLOEksRUFBR08sV0FBVyxLQUVsQlYsb0NDL1BYLFNBQVNXLEVBQXNCQyxHQUMzQixPQUNJOUQsbUJBQW9COEQsRUFBaUI5RCxtQkFDckMrRCxrQkFBbUJELEVBQWlCQyxrQkFDcENDLFdBQVlGLEVBQWlCRSxXQUFXWixJQUFJYSxJQUlwRCxTQUEyQkMsR0FDdkIsT0FDSS9ELGdCQUFpQitELEVBQWEvRCxnQkFDOUJnRSxVQUFXRCxFQUFhQyxVQUFZQyxFQUEyQkYsRUFBYUMsV0FBYSxLQUN6RkUsV0FBWUgsRUFBYUcsV0FBV2pCLElBQUlhLEdBQU9HLEVBQTJCSCxJQUMxRUssUUFBU0osRUFBYUksVUFUNkJDLENBQWtCTixLQWE3RSxTQUFTRyxFQUEyQkksR0FDaEMsT0FDSWhFLGlCQUFrQmdFLEVBQWFoRSxpQkFDL0JpRSxlQUFnQkQsRUFBYUMsZUFDN0JDLGtCQUFtQkYsRUFBYUUsa0JBQ2hDQyxrQkFBbUJILEVBQWFHLGtCQUNoQ0MsY0FBZUosRUFBYUksY0FDNUJDLFVBQVdMLEVBQWFLLFVBQVV6QixJQUFJYSxJQUk5QyxTQUEwQmEsR0FDdEIsT0FDSWxFLGVBQWdCa0UsRUFBWWxFLGVBQzVCRCxVQUF5Qm1FLEVBQVluRSxVQUNyQzhCLEtBQXVCcUMsRUFBWXJDLEtBQ25Dc0MsV0FBWUQsRUFBWUMsYUFUcUJDLENBQWlCZixzREFwRHRFLFNBQVlnQixHQUFlQSxJQUFBLFdBQU1BLElBQUEsYUFBakMsQ0FBWTVLLEVBQUE0SyxlQUFBNUssRUFBQTRLLGtCQUNaLFNBQVlDLEdBQWtCQSxJQUFBLGVBQVFBLElBQUEseUJBQWFBLElBQUEsNkJBQW5ELENBQVk3SyxFQUFBNkssa0JBQUE3SyxFQUFBNksscUJBQ1osU0FBWUMsR0FBb0JBLElBQUEsV0FBTUEsSUFBQSxpQkFBU0EsSUFBQSxtQkFBL0MsQ0FBWTlLLEVBQUE4SyxvQkFBQTlLLEVBQUE4Syx1QkFDWixTQUFZQyxHQUFpQkEsSUFBQSx1QkFBWUEsSUFBQSxpQkFBU0EsSUFBQSxtQkFBbEQsQ0FBWS9LLEVBQUErSyxpQkFBQS9LLEVBQUErSyxvQkFDWixTQUFZQyxHQUFlQSxJQUFBLG1CQUFVQSxJQUFBLHlCQUFhQSxJQUFBLHVCQUFZQSxJQUFBLGlCQUE5RCxDQUFZaEwsRUFBQWdMLGVBQUFoTCxFQUFBZ0wsa0JBRVpoTCxFQUFBMEQsZUFBQSxTQUErQnVILEdBQzNCLE9BQ0lDLGdCQUFpQkQsRUFBVUMsZ0JBQzNCQyxnQkFBaUJGLEVBQVVFLGdCQUMzQkMsbUJBQW9CSCxFQUFVRyxtQkFDOUJyRCxZQUFha0QsRUFBVWxELFlBQ3ZCc0QsZUFBZ0JKLEVBQVVJLGVBQzFCQyxlQUFnQkwsRUFBVUssZUFDMUJ6RCxTQUFVb0QsRUFBVXBELFNBQ3BCQyxVQUFXbUQsRUFBVW5ELFVBQ3JCeUQsbUJBQW9CTixFQUFVTSxtQkFDOUJDLG1CQUFvQlAsRUFBVU8sbUJBQzlCQyxzQkFBdUJSLEVBQVVRLHNCQUNqQ0MsaUJBQWtCVCxFQUFVUyxpQkFDNUJDLFlBQWFWLEVBQVVVLFlBQ3ZCM0QsYUFBY2lELEVBQVVqRCxhQUN4QjRELGNBQTBDLE1BQTNCWCxFQUFVVyxjQUF3QnBDLEVBQXNCeUIsRUFBVVcsZUFBaUIsS0FDbEdDLGVBQWdCWixFQUFVWSxlQUFlOUMsSUFBSWEsR0FBT0osRUFBc0JJLElBQzFFa0MsT0FBUWIsRUFBVWEiLCJmaWxlIjoiYmxhem9yLmV4dGVuc2lvbnMud2VidXNiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgVVNCTWFuYWdlciB9IGZyb20gXCIuL1VTQk1hbmFnZXJcIjtcclxuXHJcbm5hbWVzcGFjZSBXZWJVU0Ige1xyXG4gICAgY29uc3QgYmxhem9yRXh0ZW5zaW9uczogc3RyaW5nID0gJ0JsYXpvckV4dGVuc2lvbnMnO1xyXG4gICAgLy8gZGVmaW5lIHdoYXQgdGhpcyBleHRlbnNpb24gYWRkcyB0byB0aGUgd2luZG93IG9iamVjdCBpbnNpZGUgQmxhem9yRXh0ZW5zaW9uc1xyXG4gICAgY29uc3QgZXh0ZW5zaW9uT2JqZWN0ID0ge1xyXG4gICAgICAgIFdlYlVTQjogbmV3IFVTQk1hbmFnZXIoKVxyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSkge1xyXG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBsaWJyYXJ5IGlzIGxvYWRlZCBpbiBhIGJyb3dzZXIgdmlhIGEgPHNjcmlwdD4gZWxlbWVudCwgbWFrZSB0aGVcclxuICAgICAgICAgICAgLy8gZm9sbG93aW5nIEFQSXMgYXZhaWxhYmxlIGluIGdsb2JhbCBzY29wZSBmb3IgaW52b2NhdGlvbiBmcm9tIEpTXHJcbiAgICAgICAgICAgIHdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSA9IHtcclxuICAgICAgICAgICAgICAgIC4uLmV4dGVuc2lvbk9iamVjdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSA9IHtcclxuICAgICAgICAgICAgICAgIC4uLndpbmRvd1tibGF6b3JFeHRlbnNpb25zXSxcclxuICAgICAgICAgICAgICAgIC4uLmV4dGVuc2lvbk9iamVjdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuV2ViVVNCLmluaXRpYWxpemUoKTsiLCJpbXBvcnQgeyBVU0JEZXZpY2VGb3VuZCwgVVNCUmVxdWVzdERldmljZU9wdGlvbnMsIFBhcnNlVVNCRGV2aWNlLCBVU0JDb25maWd1cmF0aW9uLCBVU0JJbnRlcmZhY2UsIFVTQkRpcmVjdGlvbiwgVVNCSW5UcmFuc2ZlclJlc3VsdCwgVVNCT3V0VHJhbnNmZXJSZXN1bHQsIFVTQlRyYW5zZmVyU3RhdHVzLCBVU0JDb250cm9sVHJhbnNmZXJQYXJhbWV0ZXJzIH0gZnJvbSBcIi4vVVNCVHlwZXNcIjtcclxuXHJcbnR5cGUgRG90TmV0UmVmZXJlbmNlVHlwZSA9IHtcclxuICBpbnZva2VNZXRob2Q8VD4obWV0aG9kSWRlbnRpZmllcjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IFQsXHJcbiAgaW52b2tlTWV0aG9kQXN5bmM8VD4obWV0aG9kSWRlbnRpZmllcjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IFByb21pc2U8VD5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVTQk1hbmFnZXIge1xyXG4gIHByaXZhdGUgdXNiOiBhbnkgPSAoPGFueT5uYXZpZ2F0b3IpLnVzYjsgLy8gVGhlIFdlYlVTQiBBUEkgcm9vdCBvYmplY3RcclxuICBwcml2YXRlIF91c2JSZWZlcmVuY2U6IERvdE5ldFJlZmVyZW5jZVR5cGUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgLy8gQWxsIGRldmljZXMgZm91bmQgb24gdGhlIGxhc3QgcmVxdWVzdFxyXG4gIC8vIFdlIGtlZXAgYSBsaXN0IG9mIHRoZSBtb3N0IHJlY2VudCBvYmplY3QgYmVjYXVzZSB3ZSBjYW4ndCBzZXJpYWxpemUgdGhlIFwicmVhbFwiIFVTQkRldmljZSB0byBzZW5kIGJhY2sgdG8gQyNcclxuICAvLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byBtYWludGFpbiBpdCBhbmQga2VlcCBjb25zaXN0ZW50IHdpdGggdGhlIEMjIHNpZGUuLi5cclxuICBwcml2YXRlIF9mb3VuZERldmljZXM6IGFueVtdID0gW107XHJcbiAgcHJpdmF0ZSBfZXZlbnRzUmVnaXN0ZXJlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBwdWJsaWMgR2V0RGV2aWNlcyA9IGFzeW5jICgpOiBQcm9taXNlPFVTQkRldmljZUZvdW5kW10+ID0+IHtcclxuICAgIGxldCBkZXZpY2VzID0gYXdhaXQgdGhpcy51c2IuZ2V0RGV2aWNlcygpO1xyXG4gICAgbGV0IGZvdW5kOiBVU0JEZXZpY2VGb3VuZFtdID0gW107XHJcbiAgICBpZiAoZGV2aWNlcykge1xyXG4gICAgICBkZXZpY2VzLmZvckVhY2goZCA9PiB7XHJcbiAgICAgICAgZm91bmQucHVzaChQYXJzZVVTQkRldmljZShkKSk7XHJcbiAgICAgICAgdGhpcy5fZm91bmREZXZpY2VzLnB1c2goZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvdW5kO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFJlcXVlc3REZXZpY2UgPSBhc3luYyAob3B0aW9uczogVVNCUmVxdWVzdERldmljZU9wdGlvbnMpOiBQcm9taXNlPFVTQkRldmljZUZvdW5kPiA9PiB7XHJcbiAgICBmdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsdGVyczogYW55W10gPSBbXTtcclxuICAgIGxldCByZXFPcHRpb25zOiBhbnkgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucyAhPSBudWxsICYmIG9wdGlvbnMuZmlsdGVycyAmJiBvcHRpb25zLmZpbHRlcnMgIT0gbnVsbCAmJiBvcHRpb25zLmZpbHRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBvcHRpb25zLmZpbHRlcnMuZm9yRWFjaChmID0+IHtcclxuICAgICAgICBsZXQgZmlsdGVyOiBhbnkgPSB7fTtcclxuICAgICAgICBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICBpZiAoZltrZXldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgZmlsdGVyW2tleV0gPSBmW2tleV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCFpc0VtcHR5KGZpbHRlcikpIHtcclxuICAgICAgICAgIGZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZmlsdGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVxT3B0aW9ucyA9IHsgZmlsdGVyczogZmlsdGVycyB9O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXFPcHRpb25zID0geyBmaWx0ZXJzOiBbXSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhdXRob3JpemVkRGV2aWNlID0gYXdhaXQgdGhpcy51c2IucmVxdWVzdERldmljZShyZXFPcHRpb25zKTtcclxuICAgIGxldCB1c2JEZXZpY2UgPSBQYXJzZVVTQkRldmljZShhdXRob3JpemVkRGV2aWNlKTtcclxuICAgIHRoaXMuX2ZvdW5kRGV2aWNlcy5wdXNoKGF1dGhvcml6ZWREZXZpY2UpO1xyXG4gICAgcmV0dXJuIHVzYkRldmljZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBPcGVuRGV2aWNlID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQpOiBQcm9taXNlPFVTQkRldmljZUZvdW5kPiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXVzYkRldmljZSkgcmV0dXJuIHJlamVjdChcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xyXG4gICAgICB1c2JEZXZpY2Uub3BlbigpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBhcnNlZCA9IFBhcnNlVVNCRGV2aWNlKHVzYkRldmljZSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhwYXJzZWQpO1xyXG4gICAgICAgICAgcmVzb2x2ZShwYXJzZWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDbG9zZURldmljZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuICAgICAgdXNiRGV2aWNlLmNsb3NlKClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKFBhcnNlVVNCRGV2aWNlKHVzYkRldmljZSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBSZXNldERldmljZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuICAgICAgdXNiRGV2aWNlLnJlc2V0KClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKFBhcnNlVVNCRGV2aWNlKHVzYkRldmljZSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBTZWxlY3RDb25maWd1cmF0aW9uID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGNvbmZpZ3VyYXRpb25WYWx1ZTogbnVtYmVyKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuICAgICAgY29uc29sZS5sb2coY29uZmlndXJhdGlvblZhbHVlKTtcclxuICAgICAgdXNiRGV2aWNlLnNlbGVjdENvbmZpZ3VyYXRpb24oY29uZmlndXJhdGlvblZhbHVlKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoUGFyc2VVU0JEZXZpY2UodXNiRGV2aWNlKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENsYWltSW50ZXJmYWNlID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGludGVyZmFjZU51bWJlcjogbnVtYmVyKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgIHVzYkRldmljZS5jbGFpbUludGVyZmFjZShpbnRlcmZhY2VOdW1iZXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgUmVsZWFzZUludGVyZmFjZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBpbnRlcmZhY2VOdW1iZXI6IG51bWJlcik6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcblxyXG4gICAgICB1c2JEZXZpY2UucmVsZWFzZUludGVyZmFjZShpbnRlcmZhY2VOdW1iZXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZWN0QWx0ZXJuYXRlSW50ZXJmYWNlID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGludGVyZmFjZU51bWJlcjogbnVtYmVyLCBhbHRlcm5hdGVTZXR0aW5nOiBudW1iZXIpOiBQcm9taXNlPFVTQkRldmljZUZvdW5kPiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXVzYkRldmljZSkgcmV0dXJuIHJlamVjdChcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xyXG5cclxuICAgICAgdXNiRGV2aWNlLnNlbGVjdEFsdGVybmF0ZUludGVyZmFjZShpbnRlcmZhY2VOdW1iZXIsIGFsdGVybmF0ZVNldHRpbmcpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgQ2xlYXJIYWx0ID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGRpcmVjdGlvbjogVVNCRGlyZWN0aW9uLCBlbmRwb2ludE51bWJlcjogbnVtYmVyKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgIHVzYkRldmljZS5jbGVhckhhbHQoZGlyZWN0aW9uLCBlbmRwb2ludE51bWJlcilcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKFBhcnNlVVNCRGV2aWNlKHVzYkRldmljZSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBUcmFuc2ZlckluID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGVuZHBvaW50TnVtYmVyOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogUHJvbWlzZTxVU0JJblRyYW5zZmVyUmVzdWx0PiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JJblRyYW5zZmVyUmVzdWx0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcblxyXG4gICAgICB1c2JEZXZpY2UudHJhbnNmZXJJbihlbmRwb2ludE51bWJlciwgbGVuZ3RoKVxyXG4gICAgICAgIC50aGVuKG91dCA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5CdWZmZXJUb0Jhc2U2NChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuZXcgVWludDhBcnJheShvdXQuZGF0YS5idWZmZXIpKSksIC8vIEhhY2sgdG8gc3VwcG9ydCBVaW50OEFycmF5IHRvIGJ5dGVbXSBzZXJpYWxpemF0aW9uLlxyXG4gICAgICAgICAgICBzdGF0dXM6IG91dC5zdGF0dXNcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFRyYW5zZmVyT3V0ID0gKGRldmljZTogVVNCRGV2aWNlRm91bmQsIGVuZHBvaW50TnVtYmVyOiBudW1iZXIsIGRhdGE6IHN0cmluZyk6IFByb21pc2U8VVNCT3V0VHJhbnNmZXJSZXN1bHQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQk91dFRyYW5zZmVyUmVzdWx0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuQmFzZTY0VG9CdWZmZXIoZGF0YSk7XHJcblxyXG4gICAgICB1c2JEZXZpY2UudHJhbnNmZXJPdXQoZW5kcG9pbnROdW1iZXIsIGJ1ZmZlcilcclxuICAgICAgICAudGhlbihvdXQgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIGJ5dGVzV3JpdHRlbjogb3V0LmJ5dGVzV3JpdHRlbixcclxuICAgICAgICAgICAgc3RhdHVzOiBvdXQuc3RhdHVzXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb250cm9sVHJhbnNmZXJJbiA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBzZXR1cDogVVNCQ29udHJvbFRyYW5zZmVyUGFyYW1ldGVycywgbGVuZ3RoOiBudW1iZXIpOiBQcm9taXNlPFVTQkluVHJhbnNmZXJSZXN1bHQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkluVHJhbnNmZXJSZXN1bHQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgIHVzYkRldmljZS5Db250cm9sVHJhbnNmZXJJbihzZXR1cCwgbGVuZ3RoKVxyXG4gICAgICAgIC50aGVuKG91dCA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5CdWZmZXJUb0Jhc2U2NChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuZXcgVWludDhBcnJheShvdXQuZGF0YS5idWZmZXIpKSksIC8vIEhhY2sgdG8gc3VwcG9ydCBVaW50OEFycmF5IHRvIGJ5dGVbXSBzZXJpYWxpemF0aW9uLlxyXG4gICAgICAgICAgICBzdGF0dXM6IG91dC5zdGF0dXNcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENvbnRyb2xUcmFuc2Zlck91dCA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBzZXR1cDogVVNCQ29udHJvbFRyYW5zZmVyUGFyYW1ldGVycywgZGF0YTogc3RyaW5nKTogUHJvbWlzZTxVU0JPdXRUcmFuc2ZlclJlc3VsdD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCT3V0VHJhbnNmZXJSZXN1bHQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5CYXNlNjRUb0J1ZmZlcihkYXRhKTtcclxuXHJcbiAgICAgIHVzYkRldmljZS5jb250cm9sVHJhbnNmZXJPdXQoc2V0dXAsIGJ1ZmZlcilcclxuICAgICAgICAudGhlbihvdXQgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cob3V0KTtcclxuICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICBieXRlc1dyaXR0ZW46IG91dC5ieXRlc1dyaXR0ZW4sXHJcbiAgICAgICAgICAgIHN0YXR1czogb3V0LnN0YXR1c1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIEdldFVTQkRldmljZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kKTogYW55ID0+IHtcclxuICAgIHJldHVybiB0aGlzLl9mb3VuZERldmljZXMuZmluZChcclxuICAgICAgZCA9PiBkLnZlbmRvcklkID09IGRldmljZS52ZW5kb3JJZCAmJlxyXG4gICAgICAgIGQucHJvZHVjdElkID09IGRldmljZS5wcm9kdWN0SWQgJiZcclxuICAgICAgICBkLmRldmljZUNsYXNzID09IGRldmljZS5kZXZpY2VDbGFzcyAmJlxyXG4gICAgICAgIGQuc2VyaWFsTnVtYmVyID09IGRldmljZS5zZXJpYWxOdW1iZXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBDb25uZWN0aW9uU3RhdGVDaGFuZ2VkQ2FsbGJhY2sgPSAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLl91c2JSZWZlcmVuY2UpIHJldHVybjtcclxuICAgIGxldCBtZXRob2Q6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGV2ZW50LmRldmljZSk7XHJcblxyXG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJkaXNjb25uZWN0XCIpIHtcclxuICAgICAgbWV0aG9kID0gXCJPbkRpc2Nvbm5lY3RcIjtcclxuICAgICAgdGhpcy5fZm91bmREZXZpY2VzID0gdGhpcy5fZm91bmREZXZpY2VzLmZpbHRlcigoZCwgaW5kZXgsIGFycikgPT4ge1xyXG4gICAgICAgIHJldHVybiBkLnZlbmRvcklkICE9IHVzYkRldmljZS52ZW5kb3JJZCAmJlxyXG4gICAgICAgICAgZC5wcm9kdWN0SWQgIT0gdXNiRGV2aWNlLnByb2R1Y3RJZCAmJlxyXG4gICAgICAgICAgZC5kZXZpY2VDbGFzcyAhPSB1c2JEZXZpY2UuZGV2aWNlQ2xhc3MgJiZcclxuICAgICAgICAgIGQuc2VyaWFsTnVtYmVyICE9IHVzYkRldmljZS5zZXJpYWxOdW1iZXI7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXZlbnQudHlwZSA9PSBcImNvbm5lY3RcIikge1xyXG4gICAgICBtZXRob2QgPSBcIk9uQ29ubmVjdFwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihldmVudCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl91c2JSZWZlcmVuY2UuaW52b2tlTWV0aG9kQXN5bmMobWV0aG9kLCBQYXJzZVVTQkRldmljZShldmVudC5kZXZpY2UpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBSZWdpc3RlclVTQkV2ZW50cyA9ICh1c2I6IERvdE5ldFJlZmVyZW5jZVR5cGUpID0+IHtcclxuICAgIHRoaXMuX3VzYlJlZmVyZW5jZSA9IHVzYjtcclxuICAgIC8vVE9ETzogQ2hlY2sgd2h5IHRoaXMgZXZlbnQgaXMgbm90IGNvbnNpc3RlbnRseSBiZWluZyBmaXJlZC5cclxuICAgIGlmICghdGhpcy5fZXZlbnRzUmVnaXN0ZXJlZCkge1xyXG4gICAgICB0aGlzLnVzYi5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdFwiLCB0aGlzLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRDYWxsYmFjayk7XHJcbiAgICAgIHRoaXMudXNiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIHRoaXMuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZENhbGxiYWNrKTtcclxuICAgICAgdGhpcy5fZXZlbnRzUmVnaXN0ZXJlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgUmVtb3ZlVVNCRXZlbnRzID0gKHVzYjogRG90TmV0UmVmZXJlbmNlVHlwZSkgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2V2ZW50c1JlZ2lzdGVyZWQpIHtcclxuICAgICAgdGhpcy51c2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbm5lY3RcIiwgdGhpcy5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkQ2FsbGJhY2spO1xyXG4gICAgICB0aGlzLnVzYi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCB0aGlzLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRDYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIEJ1ZmZlclRvQmFzZTY0ID0gKGJ1ZikgPT4ge1xyXG4gICAgdmFyIGJpbnN0ciA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChidWYsIChjaCkgPT4ge1xyXG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaCk7XHJcbiAgICB9KS5qb2luKCcnKTtcclxuICAgIHJldHVybiBidG9hKGJpbnN0cik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIEJhc2U2NFRvQnVmZmVyID0gKGJhc2U2NDogc3RyaW5nKSA9PiB7XHJcbiAgICB2YXIgYmluc3RyID0gYXRvYihiYXNlNjQpO1xyXG4gICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGJpbnN0ci5sZW5ndGgpO1xyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChiaW5zdHIsIChjaCwgaSkgPT4ge1xyXG4gICAgICBidWZbaV0gPSBjaC5jaGFyQ29kZUF0KDApO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYnVmO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIFVTQkRldmljZUZvdW5kIHtcclxuICAgIHVzYlZlcnNpb25NYWpvcjogbnVtYmVyLFxyXG4gICAgdXNiVmVyc2lvbk1pbm9yOiBudW1iZXIsXHJcbiAgICB1c2JWZXJzaW9uU3VibWlub3I6IG51bWJlcixcclxuICAgIGRldmljZUNsYXNzOiBudW1iZXIsXHJcbiAgICBkZXZpY2VTdWJjbGFzczogbnVtYmVyLFxyXG4gICAgZGV2aWNlUHJvdG9jb2w6IG51bWJlcixcclxuICAgIHZlbmRvcklkOiBudW1iZXIsXHJcbiAgICBwcm9kdWN0SWQ6IG51bWJlcixcclxuICAgIGRldmljZVZlcnNpb25NYWpvcjogbnVtYmVyLFxyXG4gICAgZGV2aWNlVmVyc2lvbk1pbm9yOiBudW1iZXIsXHJcbiAgICBkZXZpY2VWZXJzaW9uU3VibWlub3I6IG51bWJlcixcclxuICAgIG1hbnVmYWN0dXJlck5hbWU6IHN0cmluZyxcclxuICAgIHByb2R1Y3ROYW1lOiBzdHJpbmcsXHJcbiAgICBzZXJpYWxOdW1iZXI6IHN0cmluZyxcclxuICAgIGNvbmZpZ3VyYXRpb246IFVTQkNvbmZpZ3VyYXRpb24gfCBudWxsLFxyXG4gICAgY29uZmlndXJhdGlvbnM6IFVTQkNvbmZpZ3VyYXRpb25bXSxcclxuICAgIG9wZW5lZDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVVNCQ29uZmlndXJhdGlvbiB7IGNvbmZpZ3VyYXRpb25WYWx1ZTogbnVtYmVyLCBjb25maWd1cmF0aW9uTmFtZTogc3RyaW5nLCBpbnRlcmZhY2VzOiBVU0JJbnRlcmZhY2VbXSB9XHJcbmV4cG9ydCBpbnRlcmZhY2UgVVNCSW50ZXJmYWNlIHsgaW50ZXJmYWNlTnVtYmVyOiBudW1iZXIsIGFsdGVybmF0ZTogVVNCQWx0ZXJuYXRlSW50ZXJmYWNlIHwgbnVsbCwgYWx0ZXJuYXRlczogVVNCQWx0ZXJuYXRlSW50ZXJmYWNlW10sIGNsYWltZWQ6IGJvb2xlYW4gfVxyXG5leHBvcnQgaW50ZXJmYWNlIFVTQkFsdGVybmF0ZUludGVyZmFjZSB7IGFsdGVybmF0ZVNldHRpbmc6IG51bWJlciwgaW50ZXJmYWNlQ2xhc3M6IG51bWJlciwgaW50ZXJmYWNlU3ViY2xhc3M6IG51bWJlciwgaW50ZXJmYWNlUHJvdG9jb2w6IG51bWJlciwgaW50ZXJmYWNlTmFtZTogc3RyaW5nLCBlbmRwb2ludHM6IFVTQkVuZHBvaW50W10gfVxyXG5leHBvcnQgaW50ZXJmYWNlIFVTQkRldmljZUZpbHRlciB7IHZlbmRvcklkOiBudW1iZXIsIHByb2R1Y3RJZDogbnVtYmVyLCBjbGFzc0NvZGU6IGFueSwgc3ViQ2xhc3NDb2RlOiBhbnksIHByb3RvY29sQ29kZTogYW55LCBzZXJpYWxOdW1iZXI6IHN0cmluZyB9XHJcbmV4cG9ydCBpbnRlcmZhY2UgVVNCUmVxdWVzdERldmljZU9wdGlvbnMgeyBmaWx0ZXJzOiBVU0JEZXZpY2VGaWx0ZXJbXSB9XHJcbmV4cG9ydCBpbnRlcmZhY2UgVVNCRW5kcG9pbnQgeyBlbmRwb2ludE51bWJlcjogbnVtYmVyLCBkaXJlY3Rpb246IFVTQkRpcmVjdGlvbiwgdHlwZTogVVNCRW5kcG9pbnRUeXBlLCBwYWNrZXRTaXplOiBudW1iZXIgfVxyXG5leHBvcnQgaW50ZXJmYWNlIFVTQlRyYW5zZmVyUmVzdWx0IHsgc3RhdHVzOiBVU0JUcmFuc2ZlclN0YXR1cyB9XHJcbmV4cG9ydCBpbnRlcmZhY2UgVVNCSW5UcmFuc2ZlclJlc3VsdCBleHRlbmRzIFVTQlRyYW5zZmVyUmVzdWx0IHsgZGF0YTogYW55IH1cclxuZXhwb3J0IGludGVyZmFjZSBVU0JPdXRUcmFuc2ZlclJlc3VsdCBleHRlbmRzIFVTQlRyYW5zZmVyUmVzdWx0IHsgYnl0ZXNXcml0dGVuOiBudW1iZXIgfVxyXG5leHBvcnQgaW50ZXJmYWNlIFVTQkNvbnRyb2xUcmFuc2ZlclBhcmFtZXRlcnMgeyByZXF1ZXN0VHlwZTogVVNCUmVxdWVzdFR5cGUsIHJlY2lwaWVudDogVVNCUmVjaXBpZW50LCByZXF1ZXN0OiBudW1iZXIsIHZhbHVlOiBudW1iZXIsIGluZGV4OiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IGVudW0gVVNCRGlyZWN0aW9uIHsgXCJpblwiLCBcIm91dFwiIH1cclxuZXhwb3J0IGVudW0gVVNCRW5kcG9pbnRUeXBlIHsgXCJidWxrXCIsIFwiaW50ZXJydXB0XCIsIFwiaXNvY2hyb25vdXNcIiB9XHJcbmV4cG9ydCBlbnVtIFVTQlRyYW5zZmVyU3RhdHVzIHsgXCJva1wiLCBcInN0YWxsXCIsIFwiYmFiYmxlXCIgfVxyXG5leHBvcnQgZW51bSBVU0JSZXF1ZXN0VHlwZSB7IFwic3RhbmRhcmRcIiwgXCJjbGFzc1wiLCBcInZlbmRvclwiIH1cclxuZXhwb3J0IGVudW0gVVNCUmVjaXBpZW50IHsgXCJkZXZpY2VcIiwgXCJpbnRlcmZhY2VcIiwgXCJlbmRwb2ludFwiLCBcIm90aGVyXCIgfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFBhcnNlVVNCRGV2aWNlKHJhd0RldmljZTogYW55KTogVVNCRGV2aWNlRm91bmQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1c2JWZXJzaW9uTWFqb3I6IHJhd0RldmljZS51c2JWZXJzaW9uTWFqb3IsXHJcbiAgICAgICAgdXNiVmVyc2lvbk1pbm9yOiByYXdEZXZpY2UudXNiVmVyc2lvbk1pbm9yLFxyXG4gICAgICAgIHVzYlZlcnNpb25TdWJtaW5vcjogcmF3RGV2aWNlLnVzYlZlcnNpb25TdWJtaW5vcixcclxuICAgICAgICBkZXZpY2VDbGFzczogcmF3RGV2aWNlLmRldmljZUNsYXNzLFxyXG4gICAgICAgIGRldmljZVN1YmNsYXNzOiByYXdEZXZpY2UuZGV2aWNlU3ViY2xhc3MsXHJcbiAgICAgICAgZGV2aWNlUHJvdG9jb2w6IHJhd0RldmljZS5kZXZpY2VQcm90b2NvbCxcclxuICAgICAgICB2ZW5kb3JJZDogcmF3RGV2aWNlLnZlbmRvcklkLFxyXG4gICAgICAgIHByb2R1Y3RJZDogcmF3RGV2aWNlLnByb2R1Y3RJZCxcclxuICAgICAgICBkZXZpY2VWZXJzaW9uTWFqb3I6IHJhd0RldmljZS5kZXZpY2VWZXJzaW9uTWFqb3IsXHJcbiAgICAgICAgZGV2aWNlVmVyc2lvbk1pbm9yOiByYXdEZXZpY2UuZGV2aWNlVmVyc2lvbk1pbm9yLFxyXG4gICAgICAgIGRldmljZVZlcnNpb25TdWJtaW5vcjogcmF3RGV2aWNlLmRldmljZVZlcnNpb25TdWJtaW5vcixcclxuICAgICAgICBtYW51ZmFjdHVyZXJOYW1lOiByYXdEZXZpY2UubWFudWZhY3R1cmVyTmFtZSxcclxuICAgICAgICBwcm9kdWN0TmFtZTogcmF3RGV2aWNlLnByb2R1Y3ROYW1lLFxyXG4gICAgICAgIHNlcmlhbE51bWJlcjogcmF3RGV2aWNlLnNlcmlhbE51bWJlcixcclxuICAgICAgICBjb25maWd1cmF0aW9uOiByYXdEZXZpY2UuY29uZmlndXJhdGlvbiAhPSBudWxsID8gUGFyc2VVU0JDb25maWd1cmF0aW9uKHJhd0RldmljZS5jb25maWd1cmF0aW9uKSA6IG51bGwsXHJcbiAgICAgICAgY29uZmlndXJhdGlvbnM6IHJhd0RldmljZS5jb25maWd1cmF0aW9ucy5tYXAocmF3ID0+IFBhcnNlVVNCQ29uZmlndXJhdGlvbihyYXcpKSxcclxuICAgICAgICBvcGVuZWQ6IHJhd0RldmljZS5vcGVuZWRcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFBhcnNlVVNCQ29uZmlndXJhdGlvbihyYXdDb25maWd1cmF0aW9uOiBhbnkpOiBVU0JDb25maWd1cmF0aW9uIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY29uZmlndXJhdGlvblZhbHVlOiByYXdDb25maWd1cmF0aW9uLmNvbmZpZ3VyYXRpb25WYWx1ZSxcclxuICAgICAgICBjb25maWd1cmF0aW9uTmFtZTogcmF3Q29uZmlndXJhdGlvbi5jb25maWd1cmF0aW9uTmFtZSxcclxuICAgICAgICBpbnRlcmZhY2VzOiByYXdDb25maWd1cmF0aW9uLmludGVyZmFjZXMubWFwKHJhdyA9PiBQYXJzZVVTQkludGVyZmFjZShyYXcpKVxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gUGFyc2VVU0JJbnRlcmZhY2UocmF3SW50ZXJmYWNlOiBhbnkpOiBVU0JJbnRlcmZhY2Uge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbnRlcmZhY2VOdW1iZXI6IHJhd0ludGVyZmFjZS5pbnRlcmZhY2VOdW1iZXIsXHJcbiAgICAgICAgYWx0ZXJuYXRlOiByYXdJbnRlcmZhY2UuYWx0ZXJuYXRlID8gUGFyc2VVU0JBbHRlcm5hdGVJbnRlcmZhY2UocmF3SW50ZXJmYWNlLmFsdGVybmF0ZSkgOiBudWxsLFxyXG4gICAgICAgIGFsdGVybmF0ZXM6IHJhd0ludGVyZmFjZS5hbHRlcm5hdGVzLm1hcChyYXcgPT4gUGFyc2VVU0JBbHRlcm5hdGVJbnRlcmZhY2UocmF3KSksXHJcbiAgICAgICAgY2xhaW1lZDogcmF3SW50ZXJmYWNlLmNsYWltZWRcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFBhcnNlVVNCQWx0ZXJuYXRlSW50ZXJmYWNlKHJhd0FsdGVybmF0ZTogYW55KTogVVNCQWx0ZXJuYXRlSW50ZXJmYWNlIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWx0ZXJuYXRlU2V0dGluZzogcmF3QWx0ZXJuYXRlLmFsdGVybmF0ZVNldHRpbmcsXHJcbiAgICAgICAgaW50ZXJmYWNlQ2xhc3M6IHJhd0FsdGVybmF0ZS5pbnRlcmZhY2VDbGFzcyxcclxuICAgICAgICBpbnRlcmZhY2VTdWJjbGFzczogcmF3QWx0ZXJuYXRlLmludGVyZmFjZVN1YmNsYXNzLFxyXG4gICAgICAgIGludGVyZmFjZVByb3RvY29sOiByYXdBbHRlcm5hdGUuaW50ZXJmYWNlUHJvdG9jb2wsXHJcbiAgICAgICAgaW50ZXJmYWNlTmFtZTogcmF3QWx0ZXJuYXRlLmludGVyZmFjZU5hbWUsXHJcbiAgICAgICAgZW5kcG9pbnRzOiByYXdBbHRlcm5hdGUuZW5kcG9pbnRzLm1hcChyYXcgPT4gUGFyc2VVU0JFbmRwb2ludChyYXcpKVxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gUGFyc2VVU0JFbmRwb2ludChyYXdFbmRwb2ludDogYW55KTogVVNCRW5kcG9pbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbmRwb2ludE51bWJlcjogcmF3RW5kcG9pbnQuZW5kcG9pbnROdW1iZXIsXHJcbiAgICAgICAgZGlyZWN0aW9uOiA8VVNCRGlyZWN0aW9uPnJhd0VuZHBvaW50LmRpcmVjdGlvbixcclxuICAgICAgICB0eXBlOiA8VVNCRW5kcG9pbnRUeXBlPnJhd0VuZHBvaW50LnR5cGUsXHJcbiAgICAgICAgcGFja2V0U2l6ZTogcmF3RW5kcG9pbnQucGFja2V0U2l6ZVxyXG4gICAgfTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=